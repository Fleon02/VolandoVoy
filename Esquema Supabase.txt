--
-- Name: beep; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.beep (
    idusuario bigint NOT NULL,
    hash_contrasena character varying,
    salt character varying
);


--
-- Name: beep_idusuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.beep ALTER COLUMN idusuario ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.beep_idusuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: books; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.books (
    id bigint NOT NULL,
    title character varying NOT NULL,
    author character varying,
    image_url character varying,
    is_finished boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT now()
);


--
-- Name: books_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.books ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.books_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: comentarios; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.comentarios (
    idusuario bigint NOT NULL,
    idlocalidad bigint,
    comentario text,
    valoracion smallint
);


--
-- Name: comentarios_idusuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.comentarios ALTER COLUMN idusuario ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.comentarios_idusuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: localidad; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.localidad (
    idlocalidad bigint NOT NULL,
    localidad character varying,
    imglocalidad character varying,
    idprovincia bigint
);


--
-- Name: localidades_idlocalidad_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.localidad ALTER COLUMN idlocalidad ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.localidades_idlocalidad_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: lugarinteres; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.lugarinteres (
    idlugar bigint NOT NULL,
    idlocalidad bigint,
    lugar character varying,
    imglugar character varying
);


--
-- Name: lugaresinteres_idlugar_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.lugarinteres ALTER COLUMN idlugar ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.lugaresinteres_idlugar_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: provincia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.provincia (
    idprovincia bigint NOT NULL,
    provincia character varying,
    imgprovincia character varying,
    com_autonoma character varying
);


--
-- Name: provincia_idprovincia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.provincia ALTER COLUMN idprovincia ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.provincia_idprovincia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: retos; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.retos (
    idreto bigint NOT NULL,
    idlocalidad bigint,
    reto character varying,
    superado boolean
);


--
-- Name: retos_idreto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.retos ALTER COLUMN idreto ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.retos_idreto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: usuarios; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.usuarios (
    idusuario bigint NOT NULL,
    nombre_usuario character varying,
    apellidos_usuario character varying,
    email_usuario character varying,
    rol public.rol,
    fecha_alta timestamp without time zone,
    imagen_usuario character varying
);


--
-- Name: usuarios_idusuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

ALTER TABLE public.usuarios ALTER COLUMN idusuario ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.usuarios_idusuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);
--
-- Name: beep beep_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.beep
    ADD CONSTRAINT beep_pkey PRIMARY KEY (idusuario);


--
-- Name: books books_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.books
    ADD CONSTRAINT books_pkey PRIMARY KEY (id);


--
-- Name: comentarios comentarios_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.comentarios
    ADD CONSTRAINT comentarios_pkey PRIMARY KEY (idusuario);


--
-- Name: localidad localidades_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.localidad
    ADD CONSTRAINT localidades_pkey PRIMARY KEY (idlocalidad);


--
-- Name: lugarinteres lugaresinteres_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lugarinteres
    ADD CONSTRAINT lugaresinteres_pkey PRIMARY KEY (idlugar);


--
-- Name: provincia provincia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.provincia
    ADD CONSTRAINT provincia_pkey PRIMARY KEY (idprovincia);
g

--
-- Name: retos retos_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.retos
    ADD CONSTRAINT retos_pkey PRIMARY KEY (idreto);


--
-- Name: usuarios usuarios_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_pkey PRIMARY KEY (idusuario);

--
-- Name: beep public_beep_idusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.beep
    ADD CONSTRAINT public_beep_idusuario_fkey FOREIGN KEY (idusuario) REFERENCES public.usuarios(idusuario) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: comentarios public_comentarios_idlocalidad_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.comentarios
    ADD CONSTRAINT public_comentarios_idlocalidad_fkey FOREIGN KEY (idlocalidad) REFERENCES public.localidad(idlocalidad) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: localidad public_localidad_idprovincia_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.localidad
    ADD CONSTRAINT public_localidad_idprovincia_fkey FOREIGN KEY (idprovincia) REFERENCES public.provincia(idprovincia);


--
-- Name: lugarinteres public_lugarinteres_idlocalidad_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lugarinteres
    ADD CONSTRAINT public_lugarinteres_idlocalidad_fkey FOREIGN KEY (idlocalidad) REFERENCES public.localidad(idlocalidad) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: retos public_retos_idlocalidad_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.retos
    ADD CONSTRAINT public_retos_idlocalidad_fkey FOREIGN KEY (idlocalidad) REFERENCES public.localidad(idlocalidad) ON UPDATE CASCADE ON DELETE CASCADE;



